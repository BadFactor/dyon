fn main() {
    code := str(unroll_count_to_ten())
    println(code)

    m := unwrap(module(in: "hello.dyon", string: code, imports: []))
    call(m, "main", [])
}

js(t) = json_string(t)

hello_world() = link {
    "fn main() {\n"
    "    println("json_string("hello_world")")\n"
    "}\n"
}

count_to_ten() = link {
    "fn main() {\n"
    "    for i 10 {println(i+1)}"
    "}\n"
}

unroll_count_to_ten() = link {
    "fn main() {\n"link i 10 {
    "    println("i+1")\n"
    }"}\n"
}
